{
    "version": "https://jsonfeed.org/version/1",
    "title": "Walt's Blog • All posts by \"blog\" category",
    "description": "",
    "home_page_url": "http://waltcsz.github.io",
    "items": [
        {
            "id": "http://waltcsz.github.io/2023/10/hexo%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/",
            "url": "http://waltcsz.github.io/2023/10/hexo%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/",
            "title": "hexo部署配置",
            "date_published": "2023-10-28T23:40:41.000Z",
            "content_html": "<h1 id=\"下载安装\"><a class=\"markdownIt-Anchor\" href=\"#下载安装\">#</a> 下载安装</h1>\n<p>该软件是在安装 Node.js 后使用 <code>npm install</code>  安装的。</p>\n<p>在官网下载 Node.js 后，新建文件夹，运行以下命令。</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>npm install hexo-<span class=\"token function\">cli</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>hexo init</pre></td></tr></table></figure><h1 id=\"git配置\"><a class=\"markdownIt-Anchor\" href=\"#git配置\">#</a> Git 配置</h1>\n<p>git 由于之前配置过，所以维持原样。总归就是设置用户名和邮箱，添加登陆密钥。</p>\n<p>而后需要将 <code>_config.yml</code>  文件中的配置改为如下。</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> git</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">repository</span><span class=\"token punctuation\">:</span> git@github.com<span class=\"token punctuation\">:</span>WaltCSZ/waltcsz.github.io.git</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> master</pre></td></tr></table></figure><p>这样之后就可以用 <code>hexo d</code>  将网页部署到 Github Page 了。</p>\n<h1 id=\"图片导入解决\"><a class=\"markdownIt-Anchor\" href=\"#图片导入解决\">#</a> 图片导入解决</h1>\n<p>首先为了方便自己管理， <code>_config.yml</code>  中我设置了 <code>post_asset_folder: true</code> 。这样每个 md 文件都会有个同目录下对应的文件夹，然后可以将 md 文件用到的图片都放进去。其次 typora 本身也可以设置使用相对目录。</p>\n<p>这听起来很好的。完美闭环。但是，在使用 <code>hexo g</code>  构建静态网页之后， <code>index.html</code>  文件是放在 <code>assets</code>  文件夹里的，也就是与图片等同级。导致引用超链接需要从 <code>./%&#123;filename&#125;/img.png</code>  变成 <code>./img.png</code> 。而 hexo 本身不会做这样的更改。（真不知道为啥设计了 <code>post_asset_folder</code>  选项而没考虑改路径）</p>\n<p>网上大部分人使用的方法是 hexo-assets-image 插件，而我选择了一招 typora 本身的功能。就是设置图片根目录。在文件头添加以下内容。</p>\n<figure class=\"highlight markdown\"><figcaption data-lang=\"markdown\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token front-matter-block\"><span class=\"token punctuation\">---</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token front-matter yaml language-yaml\"><span class=\"token key atrule\">typora-root-url</span><span class=\"token punctuation\">:</span> filename</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">---</span></span></pre></td></tr></table></figure><p>这样对于 typora 文件来说，引用图片的时候地址就均为 <code>./img.png</code>  了。但可能其他 markdown 软件不支持吧，暂时不管了，反正我也不用。</p>\n<p>然后修改 <code>scaffolds</code>  文件夹中的模板，在开头加入以下内容，这样使用 <code>hexo new post</code>  的时候，就可以自动添加图片根目录了。</p>\n<figure class=\"highlight markdown\"><figcaption data-lang=\"markdown\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>typora-root-url: <span class=\"token comment\">hexo部署配置</span></pre></td></tr></table></figure><blockquote>\n<p>选择这个方案的原因还是很多的。首先是修改路径的插件有些好像版本有些老，有些版本有漏洞。而自己写 JavaScript 脚本的话，虽说抄抄改改也就可以用了。但我又想到，md 文件里如果每个图片都带了 <code>./%&#123;filename&#125;</code> ，那改 md 文件名的时候可能又容易出错，所以索性选择修改根目录的方法了。</p>\n</blockquote>\n<h1 id=\"主题\"><a class=\"markdownIt-Anchor\" href=\"#主题\">#</a> 主题</h1>\n<p>我也是个有选择困难症的人。选了好久，选了个二次元和简洁风相妥协的 ShokaX 主题。</p>\n<h2 id=\"图片设置\"><a class=\"markdownIt-Anchor\" href=\"#图片设置\">#</a> 图片设置</h2>\n<p>该主题会优先使用 <code>source/_data/assets/</code>  文件夹里的图片来构建网站，包括但不限于头像，图标，付款码，轮换背景图等。将需要的图片按规范命名后放进去。</p>\n<h2 id=\"评论系统-waline\"><a class=\"markdownIt-Anchor\" href=\"#评论系统-waline\">#</a> 评论系统 waline</h2>\n<p>待施工</p>\n<h1 id=\"域名\"><a class=\"markdownIt-Anchor\" href=\"#域名\">#</a> 域名</h1>\n<p>有钱了再说。</p>\n",
            "tags": []
        }
    ]
}